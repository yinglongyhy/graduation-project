(function(e){function t(t){for(var a,r,i=t[0],s=t[1],u=t[2],c=0,m=[];c<i.length;c++)r=i[c],Object.prototype.hasOwnProperty.call(l,r)&&l[r]&&m.push(l[r][0]),l[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var s=n[r];0!==l[s]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},l={app:0},o=[];function r(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"89356820"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=l[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=l[e]=[t,a]}));t.push(n[2]=a);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=r(e);var u=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=l[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,n[1](u)}l[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"147e":function(e,t,n){},"174e":function(e,t,n){},"23e8":function(e,t,n){"use strict";n("147e")},"2f61":function(e,t,n){"use strict";n("4d02")},"435f":function(e,t,n){},4792:function(e,t,n){"use strict";n("5c14")},"4d02":function(e,t,n){},"4d0e":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header"),n("router-view")],1)},o=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":this.$route.path,mode:"horizontal","text-color":"black",router:!0}},[n("el-menu-item",{staticStyle:{float:"left"},attrs:{index:"/"}},[e._v("首页")]),null===e.token?n("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"/signUp"}},[e._v("注册")]):e._e(),null===e.token?n("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"/login"}},[e._v("登陆")]):e._e(),null!==e.token?n("el-submenu",{staticStyle:{float:"right"},attrs:{index:"2"}},[n("template",{slot:"title"},[e._v(e._s(e.userInfo.name))]),n("el-menu-item",{attrs:{index:"/userInfo"}},[e._v("个人信息")]),n("el-menu-item",{attrs:{index:"/tenantManagerment"}},[e._v("租房管理")]),n("el-menu-item",{attrs:{index:"/ownerManagerment"}},[e._v("房源管理")]),n("el-menu-item",{attrs:{index:this.$route.path},on:{click:e.exit}},[e._v("登出")])],2):e._e()],1)],1)},i=[],s={name:"Header",data:function(){return{token:window.localStorage.getItem("token"),userInfo:JSON.parse(window.localStorage.getItem("userInfo"))}},methods:{exit:function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("userInfo"),window.location.href="/"},handleSelect:function(e,t){console.log(e,t)}}},u=s,c=(n("2f61"),n("2877")),d=Object(c["a"])(u,r,i,!1,null,"4a75c8ea",null),m=d.exports,f={name:"App",components:{Header:m}},p=f,g=(n("034f"),Object(c["a"])(p,l,o,!1,null,null,null)),h=g.exports,b=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form"},[n("header",{staticClass:"header"},[e._v("登录")]),n("div",{staticClass:"contain"},[n("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"60px",model:e.formLabelAlign}},[n("el-form-item",{attrs:{label:"账号"}},[n("el-input",{model:{value:e.formLabelAlign.name,callback:function(t){e.$set(e.formLabelAlign,"name",t)},expression:"formLabelAlign.name"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{"show-password":""},model:{value:e.formLabelAlign.password,callback:function(t){e.$set(e.formLabelAlign,"password",t)},expression:"formLabelAlign.password"}})],1),n("el-form-item",[n("el-button-group",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")]),n("router-link",{attrs:{to:"/"}},[n("el-button",[e._v("取消")])],1)],1)],1)],1)],1)])},v=[],L=(n("b0c0"),n("bc3a")),S=n.n(L),k={name:"Login",data:function(){return{labelPosition:"left",userToken:null,userInfo:null,formLabelAlign:{id:null,name:null,phoneNum:null,password:null,role:null}}},methods:{onSubmit:function(){var e=this;console.log("submit"),this.formLabelAlign.role="user",null===this.formLabelAlign.name||null===this.formLabelAlign.password?alert("账号或密码不能为空"):(console.log(this.formLabelAlign),S.a.post("/api/user/login",this.formLabelAlign,{headers:{token:window.localStorage.getItem("token")}}).then((function(t){console.log(t),e.userToken=t.headers.token,e.userInfo=t.data,console.log(e.userToken),console.log(e.userInfo),window.localStorage.setItem("token",e.userToken),window.localStorage.setItem("userInfo",JSON.stringify(e.userInfo)),window.location.href="/"})).catch((function(e){alert("账号或密码错误"),console.log(e)})))}}},y=k,A=(n("23e8"),Object(c["a"])(y,w,v,!1,null,"2798d036",null)),x=A.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form"},[n("header",{staticClass:"header"},[e._v("注册")]),n("div",{staticClass:"contain"},[n("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"60px",model:e.formLabelAlign,rules:e.rules}},[n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{model:{value:e.formLabelAlign.name,callback:function(t){e.$set(e.formLabelAlign,"name",t)},expression:"formLabelAlign.name"}})],1),n("el-form-item",{attrs:{label:"手机号",prop:"phoneNum"}},[n("el-input",{model:{value:e.formLabelAlign.phoneNum,callback:function(t){e.$set(e.formLabelAlign,"phoneNum",t)},expression:"formLabelAlign.phoneNum"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{"show-password":""},model:{value:e.formLabelAlign.password,callback:function(t){e.$set(e.formLabelAlign,"password",t)},expression:"formLabelAlign.password"}})],1),n("el-form-item",[n("el-button-group",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("注册")]),n("router-link",{attrs:{to:"/"}},[n("el-button",[e._v("取消")])],1)],1)],1)],1)],1)])},I=[],M={name:"SignUp",data:function(){var e=function(e,t,n){null===t||""===t?n(new Error("请输入用户名")):n()},t=function(e,t,n){null===t||""===t?n(new Error("请输入手机号")):/^1(3|4|5|7|8)\d{9}$/.test(t)?n():n(new Error("请输入合法的手机号"))},n=function(e,t,n){null===t||""===t?n(new Error("请输入密码")):n()};return{labelPosition:"left",userToken:null,userInfo:null,formLabelAlign:{id:null,name:null,phoneNum:null,password:null,role:null},rules:{name:[{validator:e,trigger:"blur"}],phoneNum:[{validator:t,trigger:"blur"}],password:[{validator:n,trigger:"blur"}]}}},methods:{onSubmit:function(){console.log("submit"),this.formLabelAlign.role="user",null===this.formLabelAlign.name||null===this.formLabelAlign.phoneNum||null===this.formLabelAlign.password?alert("账号、手机号或密码不能为空"):(console.log(this.formLabelAlign),S.a.post("/api/user",this.formLabelAlign).then((function(e){console.log(e),window.location.href="/"})).catch((function(e){alert("用户名或手机号已存在，注册失败"),console.log(e)})))}}},$=M,C=(n("5dc5"),Object(c["a"])($,_,I,!1,null,"5029540e",null)),O=C.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form"},[n("header",{staticClass:"header"},[e._v("用户信息")]),n("div",{staticClass:"contain"},[n("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.formLabelAlign}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:e.formLabelAlign.name,callback:function(t){e.$set(e.formLabelAlign,"name",t)},expression:"formLabelAlign.name"}})],1),n("el-form-item",{attrs:{label:"手机号"}},[n("el-input",{attrs:{disabled:""},model:{value:e.formLabelAlign.phoneNum,callback:function(t){e.$set(e.formLabelAlign,"phoneNum",t)},expression:"formLabelAlign.phoneNum"}})],1),n("el-form-item",{attrs:{label:"租约密钥"}},[n("el-input",{attrs:{disabled:""},model:{value:e.formLabelAlign.leaseKey,callback:function(t){e.$set(e.formLabelAlign,"leaseKey",t)},expression:"formLabelAlign.leaseKey"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{"show-password":""},model:{value:e.formLabelAlign.password,callback:function(t){e.$set(e.formLabelAlign,"password",t)},expression:"formLabelAlign.password"}})],1),n("el-form-item",[n("el-button-group",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")]),n("router-link",{attrs:{to:"/"}},[n("el-button",[e._v("取消")])],1)],1)],1)],1)],1)])},N=[],P={name:"UserInfo",data:function(){return{labelPosition:"left",formLabelAlign:{name:JSON.parse(window.localStorage.getItem("userInfo")).name,phoneNum:JSON.parse(window.localStorage.getItem("userInfo")).phoneNum,leaseKey:JSON.parse(window.localStorage.getItem("userInfo")).leaseKey,password:null},userInfo:{id:null,name:null,phoneNum:null,role:"user"}}},methods:{onSubmit:function(){var e=this;console.log("submit"),this.formLabelAlign.name===JSON.parse(window.localStorage.getItem("userInfo")).name&&null===this.formLabelAlign.password?this.$router.push("/"):(console.log(this.formLabelAlign),S.a.put("/api/user",this.formLabelAlign,{headers:{token:window.localStorage.getItem("token")}}).then((function(t){console.log(t),e.userInfo.id=JSON.parse(window.localStorage.getItem("userInfo")).id,e.userInfo.name=e.formLabelAlign.name,e.userInfo.phoneNum=e.formLabelAlign.phoneNum,window.localStorage.setItem("userInfo",JSON.stringify(e.userInfo)),e.$router.push("/")})).catch((function(e){alert("修改失败"),console.log(e)})))}}},j=P,D=(n("5c03"),Object(c["a"])(j,z,N,!1,null,"70785bf2",null)),T=D.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contain"},[n("el-card",{staticStyle:{width:"100%","margin-bottom":"20px"}},[n("el-form",{staticStyle:{float:"left"},attrs:{inline:!0,model:e.params}},[n("el-form-item",{attrs:{label:"地址"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词",clearable:!0,"remote-method":e.remoteMethod,loading:e.loading},model:{value:e.params.address,callback:function(t){e.$set(e.params,"address",t)},expression:"params.address"}},e._l(e.addressOptions,(function(e){return n("el-option",{key:e.code,attrs:{label:e.fullname,value:e.code}})})),1)],1),n("el-form-item",{attrs:{label:"价格区间"}},[n("el-input",{staticStyle:{width:"100px"},model:{value:e.params.rentMin,callback:function(t){e.$set(e.params,"rentMin",t)},expression:"params.rentMin"}}),e._v(" - "),n("el-input",{staticStyle:{width:"100px"},model:{value:e.params.rentMax,callback:function(t){e.$set(e.params,"rentMax",t)},expression:"params.rentMax"}})],1),n("el-form-item",{attrs:{label:"租赁状态"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"全部",clearable:"true"},model:{value:e.params.rented,callback:function(t){e.$set(e.params,"rented",t)},expression:"params.rented"}},[n("el-option",{attrs:{label:"已租",value:"1"}}),n("el-option",{attrs:{label:"未租",value:"0"}})],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),n("el-button",{staticStyle:{float:"left","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(null,null)}}},[e._v("添加房源")]),n("el-table",{staticClass:"table",attrs:{data:e.tableData}},[n("el-table-column",{attrs:{align:"center",label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.pictureList[0],"preview-src-list":e.row.pictureList}})]}}])}),n("el-table-column",{attrs:{align:"center",prop:"description",label:"描述",width:"350"}}),n("el-table-column",{attrs:{align:"center",formatter:e.formatAddress,prop:"address",label:"地址",width:"350"}}),n("el-table-column",{attrs:{align:"center",label:"是否出租",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{on:{click:function(n){return e.leaseInfo(t.row)}}},[e._v(e._s(1==t.row.rented?"已出租":"未出租"))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleShow(t.$index,t.row)}}},[e._v("查看")]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),n("el-dialog",{attrs:{title:"租约信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{attrs:{model:e.form}},[n("el-form-item",{attrs:{label:"租客用户名","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",disabled:e.isDisable},model:{value:e.form.tenantName,callback:function(t){e.$set(e.form,"tenantName",t)},expression:"form.tenantName"}})],1),n("el-form-item",{attrs:{label:"租客租房密钥","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",disabled:e.isDisable},model:{value:e.form.leaseKey,callback:function(t){e.$set(e.form,"leaseKey",t)},expression:"form.leaseKey"}})],1),n("el-form-item",{attrs:{label:"租金","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.rent,callback:function(t){e.$set(e.form,"rent",t)},expression:"form.rent"}})],1)],1),null!==e.form.leaseId?n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateLease()}}},[e._v("确 定")]),n("el-button",{on:{click:function(t){return e.deleteLease()}}},[e._v("解除租约")]),n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1):e._e(),null===e.form.leaseId?n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addLease()}}},[e._v("确 定")]),n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1):e._e()],1),n("div",{staticClass:"page"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},F=[],V=(n("d81d"),{name:"OwnerManagerment",data:function(){return{currentPage:1,pageSize:10,addressOptions:[],isDisable:!0,row:null,dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:"120px",form:{leaseId:null,houseInfoId:null,tenantName:null,leaseKey:null,rent:null},tableData:null,total:0,params:{address:null,rentMin:null,rentMax:null,rented:null}}},created:function(){this.init()},methods:{init:function(){this.onSubmit()},onSubmit:function(){var e=this,t="";t=t+"&pageNumber="+this.currentPage,t=t+"&pageSize="+this.pageSize,null!==this.params.rented&&""!==this.params.rented&&(t=t+"&rented="+this.params.rented),null!==this.params.address&&(t=t+"&address="+this.params.address),null!==this.params.rentMin&&(t=t+"&rentMin="+this.params.rentMin),null!==this.params.rentMax&&(t=t+"&rentMax="+this.params.rentMax),S.a.get("/api/houseInfo/page?rentType=0&owner="+JSON.parse(window.localStorage.getItem("userInfo")).id+t,{headers:{token:window.localStorage.getItem("token")}}).then((function(t){console.log(t),e.tableData=t.data.records;for(var n=0;n<e.tableData.length;n++)e.tableData[n].pictureList=e.tableData[n].pictureList.map((function(e){return"/api/images/"+e}));e.total=t.data.total})).catch((function(e){console.log(e)}))},formatRented:function(e){return 0===e.rented?"未出租":"已出租"},formatAddress:function(e){return e.address.fullname+e.detailedAddress},handleShow:function(e,t){console.log(e,t),this.$router.push({name:"HouseInfo",params:{id:t.id}})},handleEdit:function(e,t){console.log(e,t),this.$router.push({name:"SaveHouseInfo",params:{row:t}})},handleDelete:function(e,t){var n=this;1!==t.rented?S.a.delete("/api/houseInfo/"+t.id,{headers:{token:window.localStorage.getItem("token")}}).then((function(e){console.log(e),n.init()})).catch((function(e){console.log(e)})):alert("房屋已出租，不能删除")},leaseInfo:function(e){this.row=e,this.isDisable=1===e.rented,this.form.houseInfoId=e.id,1===e.rented&&(this.form.leaseId=e.leaseId,this.form.tenantName=e.tenant,this.form.leaseKey=e.leaseKey,this.form.rent=e.leaseRent),this.dialogFormVisible=!0},addLease:function(){var e=this;console.log(this.form),S.a.post("/api/lease",this.form,{headers:{token:window.localStorage.getItem("token")}}).then((function(t){console.log(t),e.row.rented=1,e.row.tenant=e.form.tenantName,e.row.leaseRent=e.form.rent,e.row.leaseKey=e.form.leaseKey,e.row.leaseId=t.data.id,e.form.leaseId=e.row.leaseId,e.dialogFormVisible=!1})).catch((function(e){console.log(e),alert("租户名或租户租房密钥错误")}))},updateLease:function(){var e=this;this.row.leaseRent!==this.form.rent?S.a.put("/api/lease",this.form,{headers:{token:window.localStorage.getItem("token")}}).then((function(t){console.log(t),e.row.leaseRent=e.form.rent,e.dialogFormVisible=!1})).catch((function(e){console.log(e)})):this.dialogFormVisible=!1},deleteLease:function(){var e=this;S.a.delete("/api/lease/"+this.form.leaseId,{headers:{token:window.localStorage.getItem("token")}}).then((function(t){console.log(t),e.row.rented=0,e.row.leaseId=null,e.row.tenant=null,e.row.leaseKey=null,e.row.leaseRent=null,e.cleanForm(),e.dialogFormVisible=!1})).catch((function(e){console.log(e)}))},cleanForm:function(){this.form.leaseId=null,this.form.houseInfoId=null,this.form.tenantName=null,this.form.leaseKey=null,this.form.rent=null},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout((function(){S.a.get("/api/address/query?name="+e,{headers:{token:window.localStorage.getItem("token")}}).then((function(e){console.log(e),t.loading=!1,t.addressOptions=e.data})).catch((function(e){console.log(e)}))}),200)):this.options=[]},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.onSubmit()},handleCurrentChange:function(e){this.currentPage=e,this.onSubmit()}}}),K=V,H=(n("d13b"),Object(c["a"])(K,E,F,!1,null,"1f64a8d6",null)),J=H.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contain"},[n("el-card",{staticStyle:{width:"100%","margin-bottom":"20px"}},[n("el-form",{staticStyle:{float:"left"},attrs:{inline:!0,model:e.params}},[n("el-form-item",{attrs:{label:"地址"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词",clearable:!0,"remote-method":e.remoteMethod,loading:e.loading},model:{value:e.params.address,callback:function(t){e.$set(e.params,"address",t)},expression:"params.address"}},e._l(e.addressOptions,(function(e){return n("el-option",{key:e.code,attrs:{label:e.fullname,value:e.code}})})),1)],1),n("el-form-item",{attrs:{label:"价格区间"}},[n("el-input",{staticStyle:{width:"100px"},model:{value:e.params.rentMin,callback:function(t){e.$set(e.params,"rentMin",t)},expression:"params.rentMin"}}),e._v(" - "),n("el-input",{staticStyle:{width:"100px"},model:{value:e.params.rentMax,callback:function(t){e.$set(e.params,"rentMax",t)},expression:"params.rentMax"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{align:"center",label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.pictureList[0],"preview-src-list":e.row.pictureList}})]}}])}),n("el-table-column",{attrs:{align:"center",prop:"description",label:"描述",width:"280"}}),n("el-table-column",{attrs:{align:"center",formatter:e.formatAddress,prop:"address",label:"地址",width:"280"}}),n("el-table-column",{attrs:{align:"center",prop:"leaseRent",label:"租金",width:"100"}}),n("el-table-column",{attrs:{align:"center",prop:"owner",label:"房主",width:"100"}}),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleShow(t.$index,t.row)}}},[e._v("查看")])]}}])})],1),n("div",{staticClass:"page"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},R=[],q={name:"TenantManagerment",data:function(){return{currentPage:1,pageSize:10,addressOptions:[],tableData:null,total:0,params:{address:null,rentMin:null,rentMax:null}}},created:function(){this.init()},methods:{init:function(){this.onSubmit()},onSubmit:function(){var e=this,t="";t=t+"&pageNumber="+this.currentPage,t=t+"&pageSize="+this.pageSize,null!==this.params.address&&(t=t+"&address="+this.params.address),null!==this.params.rentMin&&(t=t+"&rentMin="+this.params.rentMin),null!==this.params.rentMax&&(t=t+"&rentMax="+this.params.rentMax),S.a.get("/api/houseInfo/page?rented=1&rentType=1&tenant="+JSON.parse(window.localStorage.getItem("userInfo")).id+t,{headers:{token:window.localStorage.getItem("token")}}).then((function(t){console.log(t),e.tableData=t.data.records;for(var n=0;n<e.tableData.length;n++)e.tableData[n].pictureList=e.tableData[n].pictureList.map((function(e){return"/api/images/"+e}));e.total=t.data.total})).catch((function(e){console.log(e)}))},formatAddress:function(e){return e.address.fullname+e.detailedAddress},handleShow:function(e,t){console.log(e,t),this.$router.push({name:"HouseInfo",params:{id:t.id}})},handleEdit:function(e,t){console.log(e,t),this.$router.push({name:"SaveHouseInfo",params:{row:t}})},handleDelete:function(e,t){var n=this;1!==t.rented?S.a.delete("/api/houseInfo/"+t.id,{headers:{token:window.localStorage.getItem("token")}}).then((function(e){console.log(e),n.init()})).catch((function(e){console.log(e)})):alert("房屋已出租，不能删除")},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout((function(){S.a.get("/api/address/query?name="+e,{headers:{token:window.localStorage.getItem("token")}}).then((function(e){console.log(e),t.loading=!1,t.addressOptions=e.data})).catch((function(e){console.log(e)}))}),200)):this.options=[]},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.onSubmit()},handleCurrentChange:function(e){this.currentPage=e,this.onSubmit()}}},W=q,B=(n("4792"),Object(c["a"])(W,U,R,!1,null,"df05cb9c",null)),G=B.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"form"},[n("header",{staticClass:"header"},[e._v("发布房源")]),n("div",{staticClass:"contain"},[n("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.formLabelAlign}},[n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{model:{value:e.formLabelAlign.description,callback:function(t){e.$set(e.formLabelAlign,"description",t)},expression:"formLabelAlign.description"}})],1),n("el-form-item",{attrs:{label:"地址"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.formLabelAlign.address,callback:function(t){e.$set(e.formLabelAlign,"address",t)},expression:"formLabelAlign.address"}},e._l(e.addressOptions,(function(e){return n("el-option",{key:e.code,attrs:{label:e.fullname,value:e.code}})})),1)],1),n("el-form-item",{attrs:{label:"详细地址"}},[n("el-input",{model:{value:e.formLabelAlign.detailedAddress,callback:function(t){e.$set(e.formLabelAlign,"detailedAddress",t)},expression:"formLabelAlign.detailedAddress"}})],1),n("el-form-item",{attrs:{label:"面积",prop:"area",rules:[{required:!0,message:"面积不能为空"},{type:"number",message:"面积必须为数字值"}]}},[n("el-input",{attrs:{type:"area"},model:{value:e.formLabelAlign.area,callback:function(t){e.$set(e.formLabelAlign,"area",e._n(t))},expression:"formLabelAlign.area"}})],1),n("el-form-item",{attrs:{label:"租金",prop:"rent",rules:[{required:!0,message:"租金不能为空"},{type:"number",message:"租金必须为数字值"}]}},[n("el-input",{attrs:{type:"rent"},model:{value:e.formLabelAlign.rent,callback:function(t){e.$set(e.formLabelAlign,"rent",e._n(t))},expression:"formLabelAlign.rent"}})],1),n("el-form-item",{attrs:{label:"标签"}},[n("el-input",{attrs:{placeholder:"使用英文逗号分隔"},model:{value:e.formLabelAlign.labelList,callback:function(t){e.$set(e.formLabelAlign,"labelList",t)},expression:"formLabelAlign.labelList"}})],1),n("el-form-item",{attrs:{label:"图片上传"}},[n("el-upload",{attrs:{action:"/api/picture/upload","list-type":"picture-card","on-success":function(t,n,a){return e.uploadSuccess(t,n,a)},"on-preview":e.imgPreview,"on-remove":function(t,n){return e.imgRemove(t,n)},"file-list":e.formLabelAlign.pictureList,headers:e.headers}},[n("i",{staticClass:"el-icon-plus"})]),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),n("el-form-item",[n("el-button-group",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("发布")]),n("router-link",{attrs:{to:"/ownerManagerment"}},[n("el-button",[e._v("取消")])],1)],1)],1)],1)],1)])])},X=[],Y=(n("a4d3"),n("e01a"),n("a15b"),n("1276"),n("ac1f"),n("25f0"),n("a434"),{name:"SaveHouseInfo",data:function(){return{addressOptions:[],dialogImageUrl:"",dialogVisible:!1,headers:{token:window.localStorage.getItem("token")},labelPosition:"left",userToken:null,userInfo:null,formLabelAlign:{id:null,description:null,address:null,detailedAddress:null,area:null,rent:null,labelList:[],pictureList:[]}}},created:function(){null!==this.$route.params.row&&this.init(this.$route.params.row)},methods:{init:function(e){this.formLabelAlign.id=e.id,this.formLabelAlign.description=e.description,this.addressOptions.push(e.address),this.formLabelAlign.detailedAddress=e.detailedAddress,this.formLabelAlign.address=e.address.code,this.formLabelAlign.area=e.area,this.formLabelAlign.rent=e.rent,this.formLabelAlign.labelList=e.labelList.join(",");for(var t=0;t<e.pictureList.length;t++){var n=e.pictureList[t];this.formLabelAlign.pictureList.push({name:n.substring(n.lastIndexOf("/")+1),url:n})}},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout((function(){S.a.get("/api/address/query?name="+e,{headers:{token:window.localStorage.getItem("token")}}).then((function(e){console.log(e),t.loading=!1,t.addressOptions=e.data})).catch((function(e){console.log(e)}))}),200)):this.options=[]},onSubmit:function(){var e=this;console.log("submit"),this.formLabelAlign.labelList=this.formLabelAlign.labelList.toString().split(","),this.formLabelAlign.pictureList=this.formLabelAlign.pictureList.map((function(e){return e.name})),console.log(this.formLabelAlign),S.a.post("/api/houseInfo/save",this.formLabelAlign,{headers:{token:window.localStorage.getItem("token")}}).then((function(t){console.log(t),e.$router.push("/ownerManagerment")})).catch((function(e){alert("保存错误"),console.log(e)}))},imgPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},imgRemove:function(e,t){var n;console.log(e),console.log(t),n=void 0==e.response?e.name:e.response,console.log(n);for(var a=0;a<this.formLabelAlign.pictureList.length;a++)this.formLabelAlign.pictureList[a].name==n&&this.formLabelAlign.pictureList.splice(a,1)},uploadSuccess:function(e,t,n){console.log(t),console.log(n),this.formLabelAlign.pictureList.push({name:t.response,url:"/api/images/"+t.response})}}}),Z=Y,ee=(n("9389"),Object(c["a"])(Z,Q,X,!1,null,"0d8eed6f",null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contain"},[n("div",[n("el-carousel",{attrs:{interval:4e3,type:"card",width:"100%"}},e._l(this.formLabelAlign.pictureList,(function(t){return n("el-carousel-item",{key:t.id},[n("el-image",{attrs:{src:t.url,fit:e.scale-e.down}})],1)})),1)],1),n("div",[n("el-row",[n("el-col",{attrs:{span:24}},e._l(this.formLabelAlign.labelList,(function(t){return n("el-tag",{key:t,staticStyle:{float:"left",margin:"10px"}},[e._v(e._s(t)+" ")])})),1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("p",{staticStyle:{float:"left",color:"black","font-size":"30px"}},[n("i",{staticClass:"el-icon-info"}),e._v(" 房源描述："+e._s(this.formLabelAlign.description)+" ")])])],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("p",{staticStyle:{float:"left",color:"black","font-size":"20px"}},[n("i",{staticClass:"el-icon-location"}),e._v(" "+e._s(this.formLabelAlign.address.fullname+this.formLabelAlign.detailedAddress)+" ")])])],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("p",{staticStyle:{float:"left",color:"black","font-size":"30px"}},[n("i",{staticClass:"el-icon-s-home"}),n("span",{staticStyle:{color:"red"}},[e._v(" "+e._s(this.formLabelAlign.area))]),e._v(" 平米 ")])]),n("el-col",{attrs:{span:12}},[n("p",{staticStyle:{float:"left",color:"black","font-size":"30px"}},[n("i",{staticClass:"el-icon-money"}),n("span",{staticStyle:{color:"red"}},[e._v(" "+e._s(this.formLabelAlign.rent))]),e._v(" 元/月 ")])])],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("p",{staticStyle:{float:"left",color:"black","font-size":"30px"}},[n("i",{staticClass:"el-icon-user"}),n("span",[e._v(" "+e._s(this.formLabelAlign.owner))])])]),n("el-col",{attrs:{span:12}},[n("p",{staticStyle:{float:"left",color:"black","font-size":"30px"}},[n("i",{staticClass:"el-icon-phone"}),n("span",[e._v(" "+e._s(this.formLabelAlign.phoneNum))])])])],1)],1),n("div",[n("el-row",[n("el-col",{attrs:{span:24}},[n("p",{staticStyle:{float:"left",color:"black","font-size":"30px"}},[e._v(" 图片详情 ")])])],1),e._l(e.pictureListForTwo,(function(t,a){return n("el-row",{key:a},[n("el-col",{attrs:{span:12}},[n("el-image",{staticStyle:{margin:"10px"},attrs:{src:t[0].url,fit:e.scale-e.down}})],1),n("el-col",{attrs:{span:12}},[void 0!=t[1]?n("el-image",{staticStyle:{margin:"10px"},attrs:{src:t[1].url,fit:e.scale-e.down}}):e._e()],1)],1)}))],2)])},ae=[],le=(n("fb6a"),{name:"HouseInfo",data:function(){return{addressOptions:[],dialogImageUrl:"",dialogVisible:!1,headers:{token:window.localStorage.getItem("token")},labelPosition:"left",userToken:null,userInfo:null,formLabelAlign:{id:null,description:null,owner:null,phoneNum:null,address:null,detailedAddress:null,area:null,rent:null,labelList:[],pictureList:[]}}},created:function(){null!==this.$route.params.row&&this.init(this.$route.params.id)},computed:{pictureListForTwo:function(){for(var e=[],t=0,n=this.formLabelAlign.pictureList.length;t<n;t+=2)e.push(this.formLabelAlign.pictureList.slice(t,t+2));return e}},methods:{init:function(e){var t=this;S.a.get("/api/houseInfo/"+e,{headers:{token:window.localStorage.getItem("token")}}).then((function(e){console.log(e);var n=e.data;t.formLabelAlign.id=n.id,t.formLabelAlign.description=n.description,t.addressOptions.push(n.address),t.formLabelAlign.detailedAddress=n.detailedAddress,t.formLabelAlign.address=n.address,t.formLabelAlign.area=n.area,t.formLabelAlign.rent=n.rent,t.formLabelAlign.labelList=n.labelList,t.formLabelAlign.owner=n.owner,t.formLabelAlign.phoneNum=n.phoneNum;for(var a=0;a<n.pictureList.length;a++){var l=n.pictureList[a];t.formLabelAlign.pictureList.push({id:a,name:l,url:"/api/images/"+l})}})).catch((function(e){console.log(e)}))}}}),oe=le,re=(n("e253"),Object(c["a"])(oe,ne,ae,!1,null,"ec7b241a",null)),ie=re.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contain"},[n("el-card",{staticStyle:{width:"100%","margin-bottom":"20px"}},[n("el-form",{staticStyle:{float:"left"},attrs:{inline:!0,model:e.params}},[n("el-form-item",{attrs:{label:"地址"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词",clearable:!0,"remote-method":e.remoteMethod,loading:e.loading},model:{value:e.params.address,callback:function(t){e.$set(e.params,"address",t)},expression:"params.address"}},e._l(e.addressOptions,(function(e){return n("el-option",{key:e.code,attrs:{label:e.fullname,value:e.code}})})),1)],1),n("el-form-item",{attrs:{label:"价格区间"}},[n("el-input",{staticStyle:{width:"100px"},model:{value:e.params.rentMin,callback:function(t){e.$set(e.params,"rentMin",t)},expression:"params.rentMin"}}),e._v(" - "),n("el-input",{staticStyle:{width:"100px"},model:{value:e.params.rentMax,callback:function(t){e.$set(e.params,"rentMax",t)},expression:"params.rentMax"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),n("el-table",{staticClass:"table",attrs:{data:e.tableData},on:{"cell-click":e.houseInfo}},[n("el-table-column",{attrs:{width:"180"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.pictureList[0],"preview-src-list":e.row.pictureList}})]}}])}),n("el-table-column",{attrs:{width:"680"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",{staticStyle:{margin:"5px","text-align":"center"}},[n("span",{staticClass:"description"},[e._v(e._s(t.row.description))])]),n("p",{staticStyle:{"text-align":"center"}},e._l(t.row.labelList,(function(a,l){return n("span",{key:a},[e._v(" "+e._s(l===t.row.labelList.length-1&&a||a+" | ")+" ")])})),0),n("p",{staticStyle:{margin:"5px","text-align":"center"}},[e._v(" "+e._s(t.row.address.fullname+t.row.detailedAddress)+" ")])]}}])}),n("el-table-column",{attrs:{width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",{staticStyle:{margin:"5px","text-align":"center"}},[n("span",{staticClass:"price"},[e._v(e._s(t.row.rent))]),e._v("元/月 ")])]}}])})],1),n("div",{staticClass:"page"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},ue=[],ce={name:"FangList",components:{},data:function(){return{currentPage:1,pageSize:10,total:0,tableData:null,addressOptions:[],params:{address:null,rentMin:null,rentMax:null}}},created:function(){this.init()},methods:{init:function(){this.onSubmit()},onSubmit:function(){var e="";e=e+"&pageNumber="+this.currentPage,e=e+"&pageSize="+this.pageSize,null!==this.params.address&&(e=e+"&address="+this.params.address),null!==this.params.rentMin&&(e=e+"&rentMin="+this.params.rentMin),null!==this.params.rentMax&&(e=e+"&rentMax="+this.params.rentMax),this.getList(e)},getList:function(e){var t=this;S.a.get("/api/houseInfo/page?rented=0"+e,{headers:{token:window.localStorage.getItem("token")}}).then((function(e){console.log(e),t.tableData=e.data.records;for(var n=0;n<t.tableData.length;n++)t.tableData[n].pictureList=t.tableData[n].pictureList.map((function(e){return"/api/images/"+e}));t.total=e.data.total})).catch((function(e){console.log(e)}))},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout((function(){S.a.get("/api/address/query?name="+e,{headers:{token:window.localStorage.getItem("token")}}).then((function(e){console.log(e),t.loading=!1,t.addressOptions=e.data})).catch((function(e){console.log(e)}))}),200)):this.options=[]},houseInfo:function(e,t,n,a){"el-table_1_column_1"!==t.id&&(console.log(e,t,n,a),this.$router.push({name:"HouseInfo",params:{id:e.id}}))},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.onSubmit()},handleCurrentChange:function(e){this.currentPage=e,this.onSubmit()}}},de=ce,me=(n("f9fa"),Object(c["a"])(de,se,ue,!1,null,"5a03aff6",null)),fe=me.exports;a["default"].use(b["a"]);var pe=[{path:"/",name:"FangList",component:fe},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/login",name:"Login",component:x},{path:"/signUp",name:"SignUp",component:O},{path:"/userInfo",name:"UserInfo",component:T},{path:"/ownerManagerment",name:"OwnerManagerment",component:J},{path:"/tenantManagerment",name:"TenantManagerment",component:G},{path:"/saveHouseInfo",name:"SaveHouseInfo",component:te},{path:"/houseInfo/:id",name:"HouseInfo",component:ie}],ge=new b["a"]({routes:pe}),he=ge,be=n("2f62");a["default"].use(be["a"]);var we=new be["a"].Store({state:{token:"",userInfo:""},mutations:{setUserInfo:function(e,t){e.userInfo=t},clearUserInfo:function(e){e.userInfo=""},setToken:function(e,t){e.token=t},clearToken:function(e){e.token=""}},actions:{},modules:{}}),ve=n("5c96"),Le=n.n(ve);n("0fae");a["default"].config.productionTip=!1,a["default"].use(Le.a),new a["default"]({router:he,store:we,render:function(e){return e(h)}}).$mount("#app")},"5c03":function(e,t,n){"use strict";n("435f")},"5c14":function(e,t,n){},"5dc5":function(e,t,n){"use strict";n("ca06")},"85ec":function(e,t,n){},9389:function(e,t,n){"use strict";n("aa70")},a972:function(e,t,n){},aa70:function(e,t,n){},ca06:function(e,t,n){},d13b:function(e,t,n){"use strict";n("a972")},e253:function(e,t,n){"use strict";n("174e")},f9fa:function(e,t,n){"use strict";n("4d0e")}});
//# sourceMappingURL=app.6e8d7bf9.js.map