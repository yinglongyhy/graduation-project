(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48d3d2b4"],{"0213":function(e,t,a){"use strict";a("3cbd")},"236a":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var l=a("b775");function r(e,t){return Object(l["a"])({url:e,method:"post",params:t})}},"3cbd":function(e,t,a){},"6b82":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticStyle:{width:"100%","margin-bottom":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("新增用户")])],1),a("el-card",{staticStyle:{width:"100%","margin-bottom":"20px"}},[a("el-form",{staticStyle:{float:"left"},attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.params.phoneNum,callback:function(t){e.$set(e.params,"phoneNum",t)},expression:"params.phoneNum"}})],1),a("el-form-item",{attrs:{label:"角色"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.params.role,callback:function(t){e.$set(e.params,"role",t)},expression:"params.role"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index)+" ")]}}])}),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),a("el-table-column",{attrs:{label:"手机号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.phoneNum))])]}}])}),a("el-table-column",{attrs:{label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.role)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),a("span",[e._v(e._s(t.row.createTime))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),a("span",[e._v(e._s(t.row.modifiedTime))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("Page",{ref:"page",attrs:{url:e.url,params:e.params},on:{refreshList:e.refreshList}}),a("el-dialog",{attrs:{title:"编辑",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.update()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"新增用户",visible:e.userDialogFormVisible},on:{"update:visible":function(t){e.userDialogFormVisible=t}}},[a("el-form",{attrs:{model:e.addForm}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"手机号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.phoneNum,callback:function(t){e.$set(e.addForm,"phoneNum",t)},expression:"addForm.phoneNum"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),a("el-form-item",{attrs:{label:"角色","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.role,callback:function(t){e.$set(e.addForm,"role",t)},expression:"addForm.role"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.userDialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("确 定")])],1)],1)],1)},r=[],o=(a("7db0"),a("b0c0"),a("fc23")),n=a("e0fe"),i=a("236a"),s=a("bc3a"),u=a.n(s),c={components:{Page:o["a"]},filters:{statusFilter:function(e){var t={0:"success",1:"danger"};return t[e]}},data:function(){return{options:[{value:"user",label:"用户"},{value:"admin",label:"管理员"}],dialogTableVisible:!1,dialogFormVisible:!1,userDialogFormVisible:!1,formLabelWidth:"120px",url:"/api/user/page",params:{id:null,name:null,password:null},form:{name:null,phoneNum:null,password:null},addForm:{name:null,phoneNum:null,password:null,role:null},list:null,listLoading:!0}},created:function(){},methods:{onSubmit:function(){this.$refs.page.clear(),this.$refs.page.refresh()},refreshList:function(e){this.list=e,this.listLoading=!1},update:function(){var e=this,t=this.form.id,a=this.list.find((function(e){return e.id===t}));Object(i["a"])("/api/user/save",this.form).then((function(t){a.id=e.form.id,a.name=e.form.name,a.password=e.form.password})),this.dialogFormVisible=!0,this.dialogFormVisible=!1},handleEdit:function(e,t){this.form.id=t.id,this.form.name=t.name,this.form.phoneNum=t.phoneNum,this.form.password=null,this.dialogFormVisible=!0},handleDelete:function(e,t){var a=this;Object(n["a"])("/api/user/"+t.id).then((function(e){a.$refs.page.refresh()}))},addUser:function(){this.addForm.name=null,this.addForm.phoneNum=null,this.addForm.password=null,this.addForm.role="user",this.userDialogFormVisible=!0},add:function(){u.a.post("/api/user",this.addForm,{headers:{token:this.$store.getters.token}}).then((function(e){console.log(e)})).catch((function(e){console.log(e),alert("新增用户错误")})),this.userDialogFormVisible=!0,this.userDialogFormVisible=!1}}},d=c,m=a("2877"),f=Object(m["a"])(d,l,r,!1,null,null,null);t["default"]=f.exports},"7db0":function(e,t,a){"use strict";var l=a("23e7"),r=a("b727").find,o=a("44d2"),n=a("ae40"),i="find",s=!0,u=n(i);i in[]&&Array(1)[i]((function(){s=!1})),l({target:"Array",proto:!0,forced:s||!u},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)},e0fe:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var l=a("b775");function r(e,t){return Object(l["a"])({url:e,method:"delete",params:t})}},fc23:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],o=a("b775");function n(e,t){return Object(o["a"])({url:e,method:"get",params:t})}var i={props:["url","params"],data:function(){return{currentPage:1,pageSize:10,total:0}},created:function(){console.log(this.url),this.fetchData(this.url,{pageNumber:this.currentPage,pageSize:this.pageSize})},methods:{clear:function(){this.currentPage=1,this.pageSize=10},refresh:function(){this.params.pageNumber=this.currentPage,this.params.pageSize=this.pageSize,console.log(this.params),this.fetchData(this.url,this.params)},fetchData:function(e,t){var a=this;n(e,t).then((function(e){console.log(e),a.total=e.total,a.$emit("refreshList",e.records)}))},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.currentPage=e,this.refresh()}}},s=i,u=(a("0213"),a("2877")),c=Object(u["a"])(s,l,r,!1,null,null,null);t["a"]=c.exports}}]);